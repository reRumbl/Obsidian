**Списки контроля доступа (ACL)** — это механизм, используемый в сетевых устройствах (таких как маршрутизаторы и коммутаторы), чтобы управлять доступом к сети, фильтровать трафик и защищать сеть. ACL определяют правила, которые позволяют или запрещают передачу трафика через устройство на основе заданных критериев (например, IP-адресов, протоколов, портов).

Одна запись в списке контроля доступа (**ACL**) называется **ACE (Access Control Entry)** — это отдельное правило или запись, которая определяет, что делать с определённым типом трафика (разрешить или запретить его прохождение).

#### Основные принципы работы ACL

1. **Правила фильтрации**: ACL содержат набор правил, которые применяются к каждому входящему или исходящему пакету. Эти правила могут разрешать или блокировать трафик на основе различных параметров, таких как:
    
    - **IP-адрес отправителя и получателя**.
    
    - **Номер порта**.
    
    - **Протоколы (TCP, UDP, ICMP)**.
    
    - **Типы сервисов (QoS)**.

2. **Последовательное применение правил**: Каждое правило проверяется последовательно, начиная с первого. Как только найдено правило, соответствующее параметрам пакета, оно выполняется, и последующие правила уже не проверяются. Если ни одно правило не подходит, действует правило по умолчанию, которое обычно блокирует трафик.

3. **Интерфейсы применения ACL**: ACL могут применяться к интерфейсу маршрутизатора или коммутатора как на входе (inbound), так и на выходе (outbound).
    
    - **Inbound**: Правила применяются к трафику, который входит в интерфейс до его маршрутизации.
    
    - **Outbound**: Правила применяются к трафику, который покидает интерфейс после его маршрутизации.

#### Типы ACL:

ACL можно разделить на два основных типа:

##### 1. Стандартные ACL

Стандартные ACL — это простейшие списки контроля доступа, которые фильтруют трафик только на основе IP-адреса источника. Стандартные ACL работают на сетевом уровне (Layer 3) и не могут различать порты или протоколы.

**Формат:**

`access-list <номер_ACL> <permit|deny> <источник_IP> <маска_подсети>`

- **Нумерация стандартных ACL**: Обычно стандартные ACL в устройствах Cisco имеют номера в диапазоне **1–99**.
    
- **Пример правила стандартного ACL**:

```Cisco
access-list 10 permit 192.168.1.0 0.0.0.255
```

Это правило разрешает трафик от всех устройств в сети 192.168.1.0/24.

- **Ограничения**: Стандартные ACL подходят только для фильтрации по IP-адресам, что делает их менее гибкими по сравнению с расширенными ACL.

##### 2. Расширенные ACL

**Формат:**

```
access-list <номер_ACL> <permit|deny> <протокол> <источник_IP> <маска_подсети_источника> <оператор_порта_источника> <порт_источника> <назначение_IP> <маска_подсети_назначения> <оператор_порта_назначения> <порт_назначения>
```

Расширенные ACL более сложные и гибкие, чем стандартные. Они позволяют фильтровать трафик на основе множества параметров:

- **IP-адрес отправителя и получателя**.
    
- **Протоколы (TCP, UDP, ICMP, IPsec)**.
    
- **Порты (например, 80 для HTTP, 443 для HTTPS)**.
    
- **Типы трафика и услуги (QoS)**.
    
- **Нумерация расширенных ACL**: Номера расширенных ACL обычно находятся в диапазоне **100–199**.
    
- **Пример правила расширенного ACL**:
    
```Cisco
access-list 110 permit tcp 192.168.1.0 0.0.0.255 any eq 80
```
    
Это правило разрешает трафик из сети 192.168.1.0/24, который направлен на любой IP-адрес с использованием порта 80 (HTTP).
    
- **Гибкость**: Расширенные ACL предоставляют больший контроль над фильтрацией трафика и могут фильтровать его по комбинации IP-адресов, портов и протоколов.

### Правила применения ACL

1. **На входе (Inbound)**: Применение ACL на входе интерфейса означает, что трафик фильтруется до его маршрутизации. Это может помочь снизить нагрузку на маршрутизатор, так как блокируется ненужный трафик до его обработки.
    
2. **На выходе (Outbound)**: Применение ACL на выходе означает, что трафик фильтруется после маршрутизации, перед тем как покинуть интерфейс.

#### Пример применения ACL на интерфейсе

```Cisco
interface GigabitEthernet0/0 ip access-group 110 in
```

Это правило применяет расширенный ACL номер 110 ко всему входящему трафику на интерфейсе `GigabitEthernet0/0`.

### Примеры использования ACL

1. **Ограничение доступа к определённым ресурсам**: Вы можете ограничить доступ сотрудников к определённым внутренним серверам или к интернет-ресурсам.
    
2. **Защита сети от несанкционированного трафика**: ACL помогают блокировать подозрительный трафик от внешних или внутренних источников, защищая сеть от атак, таких как DDoS.
    
3. **Определение приоритета трафика**: ACL могут применяться для управления качеством обслуживания (QoS), назначая приоритет трафику в зависимости от его важности (например, VoIP-трафик может получать высокий приоритет).

### Практические рекомендации по работе с ACL

1. **Правила по умолчанию**: Всегда помните, что в конце любого списка ACL по умолчанию стоит правило, которое блокирует весь трафик (`deny all`), если другие правила не указаны.
    
2. **Оптимизация производительности**: Расположите самые часто применяемые правила в начале списка ACL, так как трафик проверяется последовательно.
    
3. **Тестирование правил ACL**: Перед тем как применять ACL в продуктивной среде, протестируйте его на тестовом окружении, чтобы избежать непреднамеренной блокировки трафика.
    
4. **Логирование**: Включайте логирование для отслеживания заблокированных пакетов и для выявления потенциальных проблем с доступом.