**ACID** - это набор требований к транзакционной системе, обеспечивающий наиболее надёжную и предсказуемую её работу — атомарность, согласованность, изоляцию, устойчивость; сформулированы в конце 1970-х годов Джимом Греем.

![[ACID.png]]

## Атомарность (Atomicity)

Атомарность означает, что транзакция должна выполнятся целиком, либо вообще не выполняться. Название происходит от такого свойства атома, как неделимость.

**Пример:**

*Допустим, требуется провести перевод денег со счета 1 на счет 2, самая простая реализация:*

```SQL
UPDATE balances SET amount = amount - 100 WHERE id = 1;
---- Возможная ошибка
UPDATE balances SET amount = amount + 100 WHERE id = 2;
```

*При этом, если произойдет какая-либо ошибка между двумя запросами, то деньги спишутся со счета 1, но не придут на счет 2. Чтобы исправить эту проблему, нужно использовать транзакцию:*

```SQL
BEGIN; 
UPDATE balances SET amount = amount - 100 WHERE id = 1;
---- Возможная ошибка, тогда произойдет 
UPDATE balances SET amount = amount + 100 WHERE id = 2;
ROLLBACK; -- COMMIT, если требуется сохранить изменения
```

Теперь соблюдается принцип атомарности и если по какой-либо причине не выполнится второй запрос, то предыдущая операция откатится.

## Консистентность (Consistency)

Консистентность означает, что данные после транзакции должны соответствовать требованиям (иметь тот же тип, что указан, и подходить под ограничения).

**Пример:**

Допустим, имеется таблица:

| Поле  | Тип     | Ограничения |
| ----- | ------- | ----------- |
| id    | Serial  | Primary Key |
| value | Integer | >= 0        |
