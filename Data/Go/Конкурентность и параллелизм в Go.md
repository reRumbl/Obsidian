Хотя [[Горутины и каналы в Go|каналы]] являются предпочтительным способом общения в [[Go|Go]], иногда требуется просто синхронизировать выполнение (дождаться завершения) или защитить общую память (переменные).

## WaitGroup

В пакете `sync` есть механизм синхронизации, не связанный с передачей данных: `WaitGroup`. Он используется для того, чтобы дождаться завершения коллекции [[Горутины и каналы в Go|горутин]].

**Методы `WaitGroup`:**

- `WaitGroup.Add(delta int)`: Увеличение внутреннего счетчика.

- `WaitGroup.Done()`: Уменьшение счетчика.

- `WaitGroup.Wait()`: Блокирует поток, пока счетчик не станет равен нулю.

## Mutex

Для защиты доступа к общим переменным от одновременного изменения несколькими горутинами используется `Mutex` из пакета `sync`.

**Методы `Mutex`:**

- `Mutex.Lock()`: Блокирует доступ к защищаемому коду.

- `Mutex.Unlock()`: Разблокирует доступ.

**Важно:** защищаемая переменная и `Mutex` должны быть в одной структуре. Следует использовать `defer mu.Unlock()` сразу после `mu.Lock()` для гарантии, что мьютекс будет снят, даже при панике.
