[[Next.js|Next.js]] предлагает мощные и гибкие подходы для получения данных, которые автоматически оптимизированы для производительности. Основной принцип — получать данные на стороне сервера, что позволяет избежать лишних запросов с клиента и ускорить загрузку страницы.

#### 1. Получение данных в Server Components

Это самый распространённый и рекомендуемый способ. В [[Next.js|Next.js]] можно использовать стандартный `fetch` API напрямую в асинхронных [[Компоненты в Next.js|Server Components]]. [[Next.js|Next.js]] расширяет `fetch`, добавляя мощную систему кэширования, что значительно улучшает производительность.

**Ключевые моменты:**

- **`async/await`**: Можно просто сделать ваш компонент асинхронным (`async function`) и использовать `await` для получения данных.

- **Автоматическое кэширование**: [[Next.js|Next.js]] автоматически кэширует результаты `fetch`-запросов. Если вы отправляете несколько одинаковых запросов на одной странице, `fetch` будет выполнен только один раз.

- **Управление кэшем**: Можно контролировать кэширование с помощью опций `fetch`.
    
    - `cache: 'force-cache'` (по умолчанию): Запрос кэшируется и повторно используется.
    
    - `cache: 'no-store'`: Запрос не кэшируется и выполняется при каждом запросе страницы.
    
    - `next: { revalidate: <seconds> }`: Запрос кэшируется на определённое время. После истечения этого времени, [[Next.js|Next.js]] попытается повторно получить данные. Это называется ISR (Incremental Static Regeneration).

Пример:

```TypeScript
async function getProducts() {
	const res = await fetch('https://api.example.com/products');
	return res.json();
}

export default async function ProductsPage() {
	const products = await getProducts();
	
	return (
		<div>
			<h1>Список товаров</h1>
			<ul>
				{products.map((product) => (
				  <li key={product.id}>{product.name}</li>
				))}
			</ul>
		</div>
	);
}
```