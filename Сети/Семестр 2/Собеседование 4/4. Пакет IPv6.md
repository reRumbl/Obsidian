1q2В начале 90-х годов специалисты инженерной группы по развитию Интернета (IETF) подняли вопрос о недостатках протокола IPv4 и начали поиски альтернативных решений. Результатом поисков стала разработка протокола IP версии 6 (IPv6). IPv6 помогает преодолеть ограничения протокола IPv4 и значительно расширяет доступные возможности, предлагая функции, которые оптимально соответствуют текущим и прогнозируемым сетевым требованиям.

К улучшениям, которые предлагает протокол IPv6, относятся следующие.

- Расширенное адресное пространство. IPv6-адреса используют 128-битную иерархическую адресацию, в отличие от протокола IPv4, использующего 32 бита.

- Улучшенная обработка пакетов. Структура заголовка IPv6 была упрощена благодаря уменьшению количества полей.

- Отсутствие необходимости в использовании NAT. Благодаря большому количеству публичных IPv6-адресов нет необходимости в преобразовании сетевых адресов (NAT) между частными и публичными адресами IPv4. Это позволяет устранить некоторые проблемы, связанные с преобразованием сетевых адресов, которые возникают при работе приложений, требующих сквозного соединения.

32-битное адресное пространство IPv4 предусматривает примерно 4 294 967 296 уникальных адресов. Адресное пространство протокола IPv6 поддерживает 340 282 366 920 938 463 463 374 607 431 768 211 456 или 340 ундециллионов адресов, что примерно равно количеству песчинок на Земле.

Одним из основных конструктивных улучшений протокола IPv6 по сравнению с IPv4 является упрощенный заголовок IPv6.

![[Поля IPv6.png]]

Поля в заголовке пакета IPv6:

- Версия. Это поле содержит 4-битное двоичное значение, которое определяет версию IP-пакета. Для пакетов IPv6 в этом поле всегда указано значение 0110.

- Класс трафика. Это 8-битное поле, соответствующее полю «Дифференцированные сервисы (DS)» в заголовке IPv4.

- Метка потока. Это 20-битное поле указывает на то, что всем пакетам с одинаковыми метками потока назначается одинаковый тип обработки маршрутизаторами.

- Длина полезной нагрузки. Это 16-битное поле указывает длину блока данных или полезной нагрузки пакета IPv6.

- Следующий заголовок. Это 8-битное поле, соответствующее полю «Протокол» в заголовке IPv4. Оно указывает тип полезной нагрузки данных, которые переносит пакет, что позволяет сетевому уровню пересылать данные на соответствующий протокол более высокого уровня.

- Предел перехода. Это 8-битное поле, заменяющее поле «Время существования» (TTL) в IPv4. Это значение уменьшается на единицу каждым маршрутизатором, пересылающим пакет. Когда счетчик достигает значения 0, пакет отбрасывается, и на отправляющий узел пересылается сообщение ICMPv6, которое означает, что пакет не достиг своего назначения, так как был превышен предел переходов.

- IPv6-адрес источника. Это 128-битное поле, определяющее IPv6-адрес принимающего узла.

- IPv6-адрес назначения. Это 128-битное поле, определяющее IPv6-адрес принимающего узла.

Пакет IPv6 также может содержать заголовки расширений (EH), которые предоставляют дополнительную информацию сетевого уровня. Заголовки расширений являются дополнительными и помещаются между заголовком IPv6 и полезной нагрузкой. Заголовки расширений используются для фрагментации, обеспечения безопасности, поддержки мобильности и многого другого.

В отличие от IPv4, маршрутизаторы не делят на части направленные IPv6-пакеты.

Преимущества IPv6:

- Упрощенный формат заголовка, обеспечивающий эффективную обработку пакетов;

- Достаточно большая полезная нагрузка, обеспечивающая повышенную пропускную способность и эффективность транспортировки;

- Иерархическая сетевая архитектура для обеспечения эффективной маршрутизации;

- Автоконфигурация адресов;

- Исключение необходимости преобразования сетевых адресов между частными и публичными адресами.