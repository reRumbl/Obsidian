Чтобы понять различия между протоколами TCP и UDP, необходимо выяснить, как каждый из них использует определенные средства обеспечения надежности, а также как они отслеживают сеансы связи. Помимо поддержки таких базовых функций, как сегментация данных и их обратная сборка, протокол TCP также обеспечивает следующие возможности:

- Установление сеанса связи.

- Надежность доставки.

- Доставка в одинаковом порядке.

- Управление потоком передачи данных.

Ресурсы сетевых узлов, такие как память или вычислительные мощности, ограничены. Когда протокол TCP получает информацию о том, что эти ресурсы используются слишком активно, он может потребовать от отправляющего приложения снизить скорость потока данных. Для этого TCP регулирует количество информации, передаваемой источником. Функция управления потоком передачи данных позволяет предотвратить повторную отправку данных в случае, если ресурсы получающего узла перегружены.

![[Заголовок TCP.png]]

Протокол TCP обеспечивает контроль состояния. Протокол с контролем состояния отслеживает состояние сеанса передачи данных. Для отслеживания состояния сеанса связи протокол TCP фиксирует, какую информацию он отправил, и какая информация была подтверждена. Сеанс связи с контролем состояния начинается с установления сеанса обмена данными и прекращается по его завершении.

Каждый сегмент TCP содержит 20 дополнительных байтов в заголовке, инкапсулируя данные уровня приложений:

- Порт источника (16 бит) и порт назначения (16 бит): используется для определения приложения.

- Порядковый номер (32 бита): используется для повторной сборки данных.

- Номер подтверждения (32 бита): указывает на получение данных и ожидание следующего байта от источника.

- Длина заголовка (4 бита): параметр, который также называется смещением данных. Обозначает длину заголовка сегмента TCP.

- Зарезервировано (6 бит): поле, зарезервированное для последующего использования.

- Биты управления (6 бит): включает двоичные коды, или флаги, которые указывают назначение и функцию сегмента TCP.

- Размер окна (16 бит): указывает количество сегментов, которые можно принять одновременно.

- Контрольная сумма (16 бит): используется для проверки ошибок в заголовке и данных сегмента.

- Срочность (16 бит): обозначает, являются ли данные срочными.

Протокол передачи датаграмм пользователя (UDP) — это транспортный протокол негарантированной доставки. UDP — это облегченный транспортный протокол, который предлагает такую же сегментацию и повторную сборку данных, как и протокол TCP, но при этом не обеспечивает надежность и управление потоком, присущие TCP. UDP является настолько простым протоколом, что обычно описывается с точки зрения того, чего он не предоставляет по сравнению с протоколом TCP.

UDP — это протокол без отслеживания состояния (stateless), а это значит, что ни клиент, ни сервер не обязаны отслеживать состояние сеанса связи. Если при использовании UDP в качестве транспортного протокола требуется надежность передачи данных, ее должно обеспечивать само приложение.

Одним из основных требований для передачи видео и голоса по сети в режиме реального времени является наличие постоянного высокоскоростного потока. Приложения для передачи видео и голоса допускают потери некоторого количества данных, которые будут едва заметны или незаметны вовсе, и отлично подходят для использования протокола UDP.

![[Заголовок UDP.png]]